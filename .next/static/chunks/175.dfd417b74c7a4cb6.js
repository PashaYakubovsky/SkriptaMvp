"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[175],{9175:function(e,t,i){i.r(t);var l=i(7437),r=i(7247),a=i(7571),o=i(2126),c=i(6463),s=i(2265),d=i(8726);t.default=e=>{var t;let{open:i,close:n,script:u,onUpdate:p,type:h}=e,v=(0,c.useRouter)(),[f,Z]=(0,s.useState)(""),[S,w]=(0,s.useState)(!1),m=async()=>{try{if(w(!0),!(null==u?void 0:u.id))throw d.ZP.error("Script not found"),Error("Script not found");await o.Z.put("/api/series/".concat(u.id),{name:f}),w(!1),d.ZP.success("Script updated"),null==p||p()}catch(e){d.ZP.error("Failed to update script"),w(!1)}},g=async()=>{try{if(w(!0),!(null==u?void 0:u.id))throw d.ZP.error("Script not found"),Error("Script not found");await o.Z.delete("/api/series/".concat(u.id)),w(!1),d.ZP.success("Script deleted"),null==p||p()}catch(e){d.ZP.error("Failed to delete script"),w(!1)}};return(0,s.useEffect)(()=>{if(u){var e;Z(null!==(e=u.name)&&void 0!==e?e:"")}},[u]),(0,l.jsxs)(r.Z,{visible:i,onClose:n,children:[(0,l.jsxs)(r.Z.Title,{className:"!w-full",children:["edit"===h&&(0,l.jsx)(a.Z,{className:"!w-[20rem]",type:"default",label:"Name",value:f,onChange:e=>Z(e.target.value),placeholder:"eg. My Series Name",initialValue:null!==(t=null==u?void 0:u.name)&&void 0!==t?t:"",crossOrigin:void 0}),"delete"===h&&"Delete Script"]}),(0,l.jsx)(r.Z.Action,{loading:S,placeholder:void 0,passive:!0,onClick:async()=>{"edit"===h&&await m(),"delete"===h&&await g(),n()},children:"edit"===h?"Update":"Delete"}),"edit"===h&&(0,l.jsx)(r.Z.Action,{onClick:()=>{let e=localStorage.getItem("userId");v.push("/response?seriesId=".concat(null==u?void 0:u.id,"&userId=").concat(e))},placeholder:void 0,children:"Go to Script"})]})}}}]);