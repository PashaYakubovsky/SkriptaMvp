(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{9831:function(e,s,t){Promise.resolve().then(t.bind(t,3002))},3002:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),i=t(2126),r=t(6463),n=t(2265),l=t(7485);let o=async e=>{let{history:s,seriesId:t}=e;return s.push({role:"user",content:"Create new episode"}),(await i.Z.post("/api/series/".concat(t),{history:s})).data};async function c(e){let s=(0,r.useRouter)(),[{history:t,loading:c},d]=(0,n.useState)({history:[],loading:!1});(0,n.useEffect)(()=>{(async()=>{if(!c){d(e=>({...e,loading:!0}));try{let t=(await i.Z.get("/api/series/".concat(e.params.seriesId))).data;s.replace("/response/".concat(t.data.id));let a=t.data.history;"string"==typeof a&&(a=JSON.parse(a));let r=a.filter(e=>"user"!==e.role&&"system"!==e.role&&"You are a film scenario creation AI assistant."!==e.content);d({history:r,loading:!1})}catch(e){d(e=>({...e,loading:!1})),console.error(e)}}})()},[e.params.seriesId]);let h=async()=>{d(e=>({...e,loading:!0}));try{let s=(await o({history:t,seriesId:e.params.seriesId})).series.history.filter(e=>"user"!==e.role);d(e=>({...e,history:s,loading:!1}))}catch(e){console.error(e),d(e=>({...e,loading:!1}))}};return c?(0,a.jsx)("div",{className:"flex items-center justify-center h-[100vh] w-full",children:(0,a.jsx)(l.s5,{visible:!0,width:"150",strokeColor:"#4B39EF",strokeWidth:"5",animationDuration:"0.75",ariaLabel:"rotating-lines-loading"})}):(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center flex-start mb-[2rem] gap-5",children:[(0,a.jsx)("header",{id:"header",className:"h-[90px] bg-[#4B39EF] text-lg pt-[3rem] w-full px-4 text-white relative",children:(0,a.jsx)("span",{className:"relative z-10",children:"Here you go..."})}),t.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 relative z-10 my-2",children:[(0,a.jsxs)("h3",{className:"font-bold",children:["episode ",s+1]}),(0,a.jsx)("p",{className:"text-lg",children:e.content})]},s)),(0,a.jsx)("button",{onClick:h,className:"rounded-lg p-2 bg-indigo-600 text-zinc-100 active:scale-125 transition-all hover:bg-indigo-800",children:"Generate new episode"})]})}}},function(e){e.O(0,[571,913,702,971,23,744],function(){return e(e.s=9831)}),_N_E=e.O()}]);