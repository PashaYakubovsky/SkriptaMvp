"use strict";(()=>{var e={};e.id=203,e.ids=[203],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},6901:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>S});var i={};t.r(i),t.d(i,{GET:()=>m,POST:()=>d});var s=t(9303),n=t(8716),a=t(670),o=t(5493),u=t(2336),p=t(667),c=t(7070);async function d(e){try{let r=await e.json(),t=r.userId;if(!t)return c.NextResponse.json({message:"userId is required"},{status:u.WE.BadRequest});if(await (0,o.Z)(),await p.Z.findOne({userId:t})){let e=await p.Z.findOneAndUpdate({userId:t},r,{new:!0});return c.NextResponse.json({filmScript:e,message:"Your FilmScript has been updated"},{status:u.WE.Ok})}let i=await p.Z.create(r);return c.NextResponse.json({filmScript:i,message:"Your FilmScript has been created"},{status:u.WE.Created})}catch(e){return c.NextResponse.json({message:e},{status:u.WE.BadRequest})}}async function m(e){let r=new URLSearchParams(e.url.split("?")[1]).get("userId");if(!r)return c.NextResponse.json({message:"userId is required"},{status:u.WE.BadRequest});try{await (0,o.Z)();let e=await p.Z.find({userId:r});return c.NextResponse.json({data:e})}catch(e){return c.NextResponse.json({error:e})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/filmScript/route",pathname:"/api/filmScript",filename:"route",bundlePath:"app/api/filmScript/route"},resolvedPagePath:"/Users/pashayakubovsky/Desktop/skripta/src/app/api/filmScript/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:S,serverHooks:x}=l,h="/api/filmScript/route";function f(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:S})}},667:(e,r,t)=>{t.d(r,{Z:()=>n});var i=t(1185);let s=new i.Schema({additionalElements:String,budget:String,desiredPrimaryFilmingLocation:String,desiredPrimaryFilmingLocations:String,emotionalEvents:[String],episodeLength:Number,episodes:Number,genre:String,language:String,mainCharacters:[String],mainCharactersLength:Number,mainCharacterEthnicity:String,primaryStoryLocation:String,storyReference:String,title:String,userId:{type:String,required:!0,unique:!0}},{timestamps:!0,toJSON:{versionKey:!1,virtuals:!0,transform:(e,r)=>{delete r._id}}}),n=i.models.FilmScript||(0,i.model)("FilmScript",s)},5493:(e,r,t)=>{t.d(r,{Z:()=>o});var i=t(1185),s=t.n(i);let n=process.env.MONGO_URI,a={},o=async function(){if(!n)throw Error("Please define the MONGO_URI environment variable inside .env.local");if(a.connection)return a.connection;a.promise||(a.promise=s().connect(n,{bufferCommands:!1}));try{a.connection=await a.promise}catch(e){throw a.promise=void 0,e}return a.connection}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[948,969],()=>t(6901));module.exports=i})();